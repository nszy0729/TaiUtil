# Tai Util - Discord音声読み上げBot

## 概要
「Tai Util」はDiscordメッセージを音声で読み上げるBotです。テキストチャンネルを指定すると、そのチャンネルに投稿されるメッセージを自動的に読み上げます。複数の言語に対応し、読み上げ速度も調整できます。読み上げの内容はメッセージの本文のみで、送信者の名前などは含みません。

## 主な機能

### 1. チャンネルの自動読み上げ
- テキストチャンネルを指定して監視開始
- 指定したチャンネルに投稿されたメッセージを自動的に読み上げ
- 読み上げるのはメッセージの本文のみ（送信者名などは読み上げません）
- 読み上げ中はボイスチャンネルに接続したまま維持（メッセージごとに接続・切断を繰り返さない）
- 読み上げ停止時にボイスチャンネルから自動退席

### 2. 複数言語対応
- 日本語（デフォルト）
- 英語
- 中国語
- 韓国語

### 3. 読み上げ速度の調整
- 0.25倍～4.0倍の範囲で調整可能
- デフォルトは1.0倍（標準速度）

### 4. 音量の調整
- 0.1倍～2.0倍の範囲で調整可能
- デフォルトは1.0倍（標準音量）

### 5. チーム分け機能
- 名前リストからランダムにチーム分け
- ボイスチャンネルのメンバーをランダムにチーム分け

## 使い方

### チャンネルの読み上げを開始する
1. `/listen` コマンドを入力します
2. `channel` パラメータで読み上げ対象のテキストチャンネルを選択します
3. 必要に応じて `voicechannel` パラメータで接続するボイスチャンネルを選択します
4. 必要に応じて `language` パラメータで言語を選択します
5. Botは以下の優先順位でボイスチャンネルに自動的に参加します
   - `voicechannel` パラメータで指定されたボイスチャンネル
   - コマンド実行者が現在接続しているボイスチャンネル
   - サーバー内の最初のボイスチャンネル
6. 指定したチャンネルに投稿されるメッセージが自動的に読み上げられます
7. Botは読み上げが必要な間はボイスチャンネルに接続したまま維持します

### チャンネルの読み上げを停止する
1. `/stop` コマンドを入力します
2. `channel` パラメータで読み上げを停止するチャンネルを選択します
3. そのサーバー内に他に読み上げ対象のチャンネルがない場合、Botはボイスチャンネルから退席します
4. 他に読み上げ対象のチャンネルがある場合は、Botはボイスチャンネルに接続したまま維持します

### 読み上げ速度を変更する
1. `/speed` コマンドを入力します
2. `rate` パラメータに希望する速度を設定します（0.25～4.0の範囲）
3. 設定した速度は、次回以降の読み上げに自動的に適用されます

### 音量を変更する
1. `/volume` コマンドを入力します
2. `level` パラメータに希望する音量を設定します（0.1～2.0の範囲）
3. 設定した音量は即座に適用され、次回以降の読み上げにも自動的に適用されます

### 現在の設定を確認する
1. `/settings` コマンドを入力します
2. 現在の読み上げ速度と音量の設定が表示されます

### 名前リストからチーム分けを行う
1. `/teamlist` コマンドを入力します
2. `names` パラメータにカンマ区切りで名前リストを入力します（例：太郎,花子,三郎,四郎）
3. `teams` パラメータに分けたいチーム数を入力します（2～10の間）
4. ランダムにチーム分けされた結果が表示されます

### ボイスチャンネルのメンバーをチーム分けする
1. `/teamvc` コマンドを入力します
2. `channel` パラメータでメンバーがいるボイスチャンネルを選択します
3. `teams` パラメータに分けたいチーム数を入力します（2～10の間）
4. 選択したボイスチャンネルのメンバーがランダムにチーム分けされた結果が表示されます

## 技術情報

### 音声処理
- Google Cloud Text-to-Speech APIを使用
- 環境は鈴木GCPプロジェクト「Discord Bot」のサービスアカウントで認証

### 必要な権限
- メッセージを読む (Read Messages/View Channels)
- メッセージを送信 (Send Messages)
- 埋め込みリンク (Embed Links)
- ファイルを添付 (Attach Files)
- アプリケーションコマンドを使用 (Use Application Commands)
- ボイスチャンネルに接続 (Connect)
- ボイスチャンネルで発言 (Speak)

## 起動方法

```
npm start
```

または

```
node index.js
```
